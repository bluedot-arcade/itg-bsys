#!/bin/bash

GREEN="\e[32m"
YELLOW="\e[33m"
RED="\e[31m"
RESET="\e[0m"

echo -e "${YELLOW}Checking for x11vnc installation...${RESET}"

if ! command -v x11vnc &> /dev/null; then
    echo -e "${RED}x11vnc not found.${RESET}"
    read -p "Would you like to install it? (Y/n): " response
    response=${response:-Y}

    if [[ "$response" =~ ^[Yy]$ ]]; then
        echo -e "${YELLOW}Installing x11vnc...${RESET}"
        sudo apt-get update -qq
        sudo apt-get install -y x11vnc
        echo -e "${GREEN}x11vnc installed successfully.${RESET}"
        echo -e "To enable VNC, run: ${YELLOW}vnc-enable${RESET}"
    else
        echo -e "${RED}x11vnc is required for VNC functionality. Exiting.${RESET}"
        exit 1
    fi
else
    echo -e "${GREEN}x11vnc is already installed.${RESET}"
    echo -e "To enable VNC, run: ${YELLOW}vnc-enable${RESET}"
fi
